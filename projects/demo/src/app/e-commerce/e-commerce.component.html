<h1>eCommerce Analytics</h1>

<section>
  <h2>Cart</h2>

  <article>
    <div *ngIf="order?.items?.length; else noOrder">
      <figure>
        <table role="grid">
          <caption>
            Your order
          </caption>
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">Unit Price</th>
              <th scope="col">Total Price</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of order?.items">
              <td data-label="Item">{{ item.article.name }}</td>
              <td data-label="Quantity">{{ item.quantity }}</td>
              <td data-label="Unit Price">{{ item.article.price | currency }}</td>
              <td data-label="Total Price">
                {{ item.quantity * (item.article?.price || 0) | currency }}
              </td>
            </tr>
          </tbody>
        </table>
      </figure>
      <p>Total price: {{ getGrandTotalPrice() | currency }}</p>
      <button class="primary" (click)="validateOrder()">Order</button>
    </div>

    <ng-template #noOrder>
      <p>Your cart is empty. Please consider adding items.</p>
    </ng-template>
  </article>
</section>

<section>
  <h2>Catalog</h2>

  <div class="grid" style="grid-template-columns: repeat(4, 1fr);">
    <article *ngFor="let article of articles">
      <h3>{{ article.name }}</h3>
      <img src="https://picsum.photos/id/{{ article.id }}/200/300" alt="" class="section media" />
      <p><small>{{ article.description }}</small></p>
      <p><small>{{ article.category }}</small></p>
      <footer>
        <div class="grid" style="grid-template-columns: repeat(2, 1fr);">
          <button role="button" class="primary outline" (click)="addArticle(article.id)">+</button>
          <button role="button" class="secondary outline" (click)="removeArticle(article.id)">-</button>
        </div>
      </footer>
    </article>
  </div>
</section>
